# Comprehensive Build Fix Plan
## Session: 2026-01-09

### Issues Identified

#### 1. Material Icons Extended Resolution Failure
**Modules Affected:**
- aura/reactivedesign/customization (ComponentEditor.kt, ZOrderEditor.kt)

**Symptoms:**
- Unresolved references: Undo, Redo, PinDrop, AspectRatio, ThreeDRotation, Visibility, VisibilityOff, LockOpen, DragHandle

**Root Cause:**
Material Icons Extended IS declared in GenesisLibraryPlugin.kt (line 126) but not being resolved at compile time.

**Fix:**
1. Clean build cache: `./gradlew clean`
2. Delete `.gradle` cache: `rm -rf .gradle`
3. Rebuild: `./gradlew assembleDebug --refresh-dependencies`

#### 2. Package/Import Conflicts - Neon Colors
**Problem:**
Two Color.kt files exist with different package paths:
- `app/src/main/java/dev/aurakai/auraframefx/ui/Color.kt` - Has NeonBlue (0xFF0077FF)
- `app/src/main/java/dev/aurakai/auraframefx/ui/theme/Color.kt` - Has NeonBlue (0xFF00D9FF)

**Affected Files:**
Files importing from wrong package will fail.

**Fix Strategy:**
- **Option A:** Consolidate into single Color.kt file
- **Option B:** Update all imports to use correct package path consistently

**Recommended:** Keep `ui/theme/Color.kt` as primary, remove or rename `ui/Color.kt` to avoid conflicts.

#### 3. KSP Build Failures in Multiple Modules

**Failing Modules:**
- auraslab
- chromacore
- collabcanvas
- genesis/oracledrive (and submodules)
- kai/sentinelsfortress/security

**Common Cause:**
KSP annotation processing failing due to:
- Missing dependencies in classpath
- Stale build cache
- Module dependency graph issues

**Fix:**
1. Check each module's build.gradle.kts has correct plugin application order
2. Ensure Hilt modules use `genesis.android.library.hilt` convention plugin
3. Clean KSP generated files: `rm -rf */build/generated/ksp`

#### 4. Type Mismatch Errors

**Example from ZOrderEditor.kt line 436:**
```
Int * Dp type mismatch
```

**Fix:**
Convert to proper Dp arithmetic:
```kotlin
// Wrong:
val size = index * 4.dp  // Int * Dp = Error

// Correct:
val size = (index * 4).dp
// OR
val size = 4.dp * index  // Dp has times(Int) operator
```

### Systematic Fix Procedure

#### Step 1: Clean Everything
```bash
./gradlew clean
rm -rf .gradle
rm -rf */build
rm -rf build-logic/build
```

#### Step 2: Fix Convention Plugin Dependencies
Verify GenesisLibraryPlugin.kt includes (already correct):
```kotlin
dependencies.add("api", "androidx.compose.material:material-icons-extended")
```

#### Step 3: Fix Module Build Files
For each failing module, ensure build.gradle.kts has:
```kotlin
plugins {
    id("genesis.android.library.hilt")  // For modules with DI
    // OR
    id("genesis.android.library")  // For modules without DI
}
```

#### Step 4: Rebuild with Dependency Refresh
```bash
./gradlew assembleDebug --refresh-dependencies --no-build-cache
```

### Files That Need Direct Fixes

#### 1. ComponentEditor.kt
All imports are correct. Issue is library resolution. Will fix with clean build.

#### 2. ZOrderEditor.kt
**Line ~436 type fix:**
```kotlin
// Find the line with Int * Dp error
// Change from:
offset(y = index * 4.dp)

// To:
offset(y = (index * 4).dp)
```

#### 3. Color.kt Consolidation
**Decision needed:** Which Color.kt to keep?

**Recommendation:** Keep `ui/theme/Color.kt`, move any unique colors from `ui/Color.kt` to it.

### Expected Outcomes

After fixes:
- ✅ All Material Icons resolve
- ✅ KSP completes successfully
- ✅ Type errors resolved
- ✅ No unresolved references
- ✅ All modules compile

### Verification Commands
```bash
# After fixes, verify each module compiles:
./gradlew :aura:reactivedesign:customization:assembleDebug
./gradlew :aura:reactivedesign:chromacore:assembleDebug
./gradlew :genesis:oracledrive:assembleDebug
./gradlew :kai:sentinelsfortress:security:assembleDebug

# Then full build:
./gradlew assembleDebug
```

### Notes for Matthew
- Network connectivity required for dependency resolution
- If offline, ensure all dependencies cached in `~/.gradle/caches`
- Build may take 5-10 minutes on first clean build
- Expect ~90% error reduction after clean + rebuild

---
Generated by Claude - Session ID: review-config-files-dSjgQ
Date: 2026-01-09
