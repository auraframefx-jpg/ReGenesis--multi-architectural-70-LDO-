bitnet_integration:
  version: "1.0.0"
  target_architecture: "ARM64-v8a"
  min_sdk: 29
  status: "Feasibility Confirmed - PoC Scaffolding Complete"

  build_requirements:
    ndk_version: "r27b (26.0+)"
    cmake_version: "3.22.1+"
    toolchain: "llvm-clang++-18"
    cxx_standard: "17"

  compiler_flags:
    - "-march=armv8.2-a+sve2"  # Enable SVE2 for Snapdragon 8 Gen 3
    - "-mtune=cortex-a720"     # Optimize for Kryo Gold cores
    - "-O3"                    # Max optimization
    - "-D__ARM_FEATURE_SVE=1"
    - "-mfpu=neon"             # Fallback vectorization

  memory_strategy:
    model_loading: "mmap(MAP_SHARED)"
    paging: "madvise(MADV_SEQUENTIAL)"
    kernel_page_size: "4KB default, 16KB/64KB preferred if supported"
    estimated_ram_usage:
      weights_100B_1_58bit: "~19.75 GB"
      active_working_set: "4-8 GB (Layer-wise paging)"
      context_cache_4k: "~2 GB"

  performance_projections:
    device: "Snapdragon 8 Gen 3 (12-16GB RAM)"
    inference_speed:
      100B_ternary: "4-6 tokens/sec"
      7B_ternary: "20-50 tokens/sec"
    power_efficiency: "~0.028 J/token"
    thermal_profile: "Sustained burst ~60-120s on Big Cores"

  integration_architecture:
    jni_bridge: "bitnet_bridge.cpp"
    service_layer: "BitNetLocalService.kt"
    threading: "pthread affinity pinning to Cores 4-7 (Big)"
    concurrency: "Kotlin Coroutines (Dispatchers.Default)"

  next_steps:
    - "Clone recursive microsoft/BitNet repo into app/src/main/cpp/bitnet/src"
    - "Replace stub bitnet.h with actual header"
    - "Patch ggml-bitnet kernels for SVE2 scaling (svint8_t)"
    - "Verify mmap implementation in model loader"
